<!DOCTYPE html>
<!--[if lt IE 7]>      <html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7" prefix="og: http://ogp.me/ns#" itemscope itemtype="http://schema.org/Blog"> <![endif]-->
<!--[if IE 7]>         <html lang="en" class="no-js lt-ie9 lt-ie8" prefix="og: http://ogp.me/ns#" itemscope itemtype="http://schema.org/Blog"> <![endif]-->
<!--[if IE 8]>         <html lang="en" class="no-js lt-ie9" prefix="og: http://ogp.me/ns#" itemscope itemtype="http://schema.org/Blog"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="en" class="no-js" prefix="og: http://ogp.me/ns#" itemscope itemtype="http://schema.org/Blog"> <!--<![endif]-->
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>techLog - DevOps tag</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<link rel="shortcut icon" href="../" type="">
<meta name="author" content="Priyanka Tyagi">
<meta name="copyright" content="Priyanka Tyagi">
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@" />
<meta property="og:site_name" content="techLog" />
<meta property="og:title" content="techLog" />
<meta property="og:type" content="website" />
<meta property="og:url" content=".." />
<meta name="twitter:url" content=".." />
<meta itemprop="name" content="techLog" />
<meta itemprop="url" content=".."/>
<link href="../None" type="application/atom+xml" rel="alternate" title="techLog ATOM Feed"/>
<link href='//fonts.googleapis.com/css?family=Open+Sans:800italic' rel='stylesheet' type='text/css'>
<link href='//fonts.googleapis.com/css?family=Oswald' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/uikit/2.15.0/css/uikit.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/uikit/2.15.0/css/components/search.min.css">
<link rel="stylesheet" href="/theme/css/tipuesearch.css">
<link rel="stylesheet" href="/theme/css/solarized.css">
<link rel="stylesheet" href="/theme/css/main.css">

<script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script>
</head>
<body>
<!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

<header class=" mg-header uk-navbar uk-navbar-attached">

    <div class="uk-container uk-container-center">
        <div class="uk-grid" data-uk-grid-margin>

            <a class="mg-brand uk-navbar-brand uk-hidden-small" href="..">techLog</a>
            <div class="mg-tagline uk-navbar-content uk-hidden-small"></div>
            <a class="uk-navbar-toggle uk-visible-small" href="#mg-offcanvas" data-uk-offcanvas></a>
            <a class="mg-brand uk-navbar-brand uk-navbar-center uk-visible-small" href="..">techLog</a>

        </div>
    </div>
</header>

<main class="mg-main">

<div class="uk-container uk-container-center">

    <div class="uk-grid" data-uk-grid-margin>
        
<div class="uk-width-medium-4-5">


            <article class="uk-article" itemtype="http://schema.org/BlogPosting" itemscope="itemscope" itemprop="blogPost">
                <a href="../automating-android-app-publishing-to-play-store-using-jenkins.html" class="uk-article-title uk-link-muted" itemprop="name">Automating Android App publishing to Play Store  using Jenkins</a>
                <p class="uk-article-meta"><time datetime="2017-02-23" itemprop="datePublished">Thu 23 February 2017</time> • <a href="../category/development.html">Development</a></p>
</p>
                <p class="uk-article-lead" itemprop="description">This post shows how to automate Android App publishing to Play Store using Jenkins on Mac OSX 10.12.3 and Jenkins 2.46.</p>
                <section itemprop="articleBody"><h3>Introduction</h3>
<p>This article describes the journey I took from setting up Jenkins to automate publishing Android APKs to Google Play Publishing portal and useful notes that I collected along the way. I set up Jenkins-2.46 on Mac OSX 10.12.3.</p>
<h4>Download Package</h4>
<p>You can download “.pkg” file from <a href="http://mirrors.jenkins.io/osx/latest">here</a></p>
<h4>Complete Installation</h4>
<p>Follow the instructions to complete installation.
<img alt="Alt installation" src="../images/jenkins/installation.png"></p>
<p><strong>Note:</strong> You’ll be asked to enter an additional password like below to ensure the security:
<br>
<img alt="Alt installation2" src="../images/jenkins/installation-2.png"></p>
<h4>Choosing Plugins</h4>
<p>You can go with default plugins unless you know what plugins you want to install. I'll cover other plugins, if needed as their need arises.</p>
<h4>Starting Jenkins</h4>
<p>Once installation is complete, you can type  <a href="http://localhost:8080">http://localhost:8080</a> in your browser to start jenkins server. It’ll ask for temporary password it created at : /Users/Shared/Jenkins/Home/secrets/initialAdminPassword</p>
<p>This is how it will look like:
<img alt="Alt starting" src="../images/jenkins/starting.png"></p>
<p><strong>Note:</strong> Unless you’ve created an admin user explicitly, you can login as administrator using username <strong>“admin”</strong> and password created in <strong>“/Users/Shared/Jenkins/Home/secrets/initialAdminPassword”</strong> file.</p>
<p>Click on “Start Jenkins” to start creating jobs on Jenkins to automate project building and publishing.</p>
<h3>Setting up Job to Build Android project</h3>
<h4><strong>Create Jenkins Job</strong></h4>
<ol>
<li>
<p>Create a free-style project.
<img alt="Alt free-style" src="../images/jenkins/project-1.png"></p>
</li>
<li>
<p>Add Repository in <strong>Source Code Management</strong> section. You will have to provide credentials to Jenkins to access source code repository.</p>
</li>
<li>
<p>Add build specific configuration in <strong>Build</strong> section. I'll be using shell script to build my gradle based project.</p>
</li>
</ol>
<p><strong>Note:</strong> If you're running into source code repo access issues, then you may want to add credentials like this:
<img alt="Alt repo-creds" src="../images/jenkins/repo-creds.png"></p>
<h4><strong>Uploading APK to Play Store</strong></h4>
<p><strong>Setup</strong></p>
<ol>
<li>
<p>You'll need <a href="https://wiki.jenkins-ci.org/display/JENKINS/Google+Play+Android+Publisher+Plugin">Google Play Android Publisher Plugin</a> plugin to publish APKs automatically from Jenkins.</p>
</li>
<li>
<p>Navigate to localhost:8080 in your browser to get to Jenkins. Click on <strong>Manage Jenkins</strong> --&gt; <strong>Manage Plugins</strong>. Look for 'Google Play Android Publisher Plugin' by typing it in search box and install. You'll need to add service account to Jenkins as well. Refer to <a href="https://wiki.jenkins-ci.org/display/JENKINS/Google+Play+Android+Publisher+Plugin">link for detailed process</a>).</p>
</li>
<li>
<p>You'll need to enable API access from Jenkins. So, you have to be owner of your <a href="https://developer.android.com/distribute/googleplay/start.html">Google Play Publisher account</a></p>
</li>
<li>
<p>Its important to know that you must have pre-existing app in Play Store already before you could upload another incremental update via Jenkins.</p>
</li>
<li>
<p>Create Service account at Play Store publishing portal under 'API Access' category at left. It'll take you to Google project console. This is where, you'll create 'JSON' or 'p12' key to enable integration between Jenkins and Play Store publishing. Keep this key safe since you'll need this to enable Jenkins account to access Play store publishing. Also, Don't forget to grant 'Release Manager' permissions to this service account in Play store Publishing portal.</p>
</li>
<li>
<p>Go back to Jenkins, and create credentials to access Play Store. This is where you'll need to provide JSON key that you created in step above.
<img alt="Alt credentials" src="../images/jenkins/playstore-service-creds.png"></p>
</li>
</ol>
<p><a href="https://wiki.jenkins-ci.org/display/JENKINS/Google+Play+Android+Publisher+Plugin">Here</a> is pretty good explanation of process to setup your accounts.</p>
<p>Note 1: You can use following command on terminal to reset <code>jenkins</code> user password, if run into password related issues:</p>
<div class="highlight"><pre><span></span>sudo passwd jenkins
</pre></div>


<p>Note 2: Jenkins will need its own installation of Android sdk. Don't forget to make sure that sdk installation has <code>license</code> directory. If its not available, then copy it from you other sdk instaltion to here at first level. Check <a href="https://developer.android.com/studio/intro/update.html#download-with-gradle">this link</a> for details.</p>
<p><strong>Configuring Job</strong>
1. Add post-build action: "Upload Android APK to Google Play"
<img alt="Alt upload-apk-1" src="../images/jenkins/upload-apk-1.png"></p>
<ol>
<li>Fill-in the path or pattern to APK created locally. In my case, its <code>**/*-release.apk</code>. Also, add languages supprted and add roll-out percentage if its being pushed in production channel. I'm publishing to <code>alpha</code> channel.
<img alt="Alt upload-apk-2" src="../images/jenkins/upload-apk-2.png"></li>
</ol>
<p>And you're done !</p>
<p>For more details about configuring uploading job refer to <a href="https://wiki.jenkins-ci.org/display/JENKINS/Google+Play+Android+Publisher+Plugin">this link</a>.</p>
<p>Extra Credits:
<a href="https://wiki.jenkins-ci.org/display/JENKINS/EnvInject+Plugin">EnvInject Plugin</a> can be used to supply APK signing password to Jenkins job. Checkout <a href="https://stackoverflow.com/questions/27234506/android-build-release-apk-on-jenkins-without-storing-my-password-in-plain-text?answertab=votes#tab-top">this</a> StackOverflow answer on how to set it up.</p></section>
                <a href="../automating-android-app-publishing-to-play-store-using-jenkins.html#disqus_thread"></a>
                <hr class="uk-article-divider">
            </article>


</div>
 
    
        <div class="uk-width-medium-1-5 uk-hidden-small">
            
            <div class="uk-panel uk-panel-box">
                <form class="uk-search" action="search.html" data-uk-search>
                    <input class="uk-search-field tipue_search" type="search" name="q" id="tipue_search_input" autocomplete="off" placeholder="Search...">
                </form>
            </div>

            <div class="uk-panel uk-panel-box">
                <ul class="uk-nav uk-nav-side">
                    <li class="uk-nav-header">Categories</li>
                    <li ><a href="../category/development.html">Development</a></li>
                    <li class="uk-nav-header">Pages</li>
                    
                    

                    <li class="uk-nav-divider"></li>
                    <li ><a href="../archives.html">Archives</a></li>
                </ul>
            </div>

            <div class="uk-panel uk-panel-box">
                <h3 class="uk-panel-title">Receive Updates</h3>
                <a rel="alternate" type="application/atom+xml" href="../None" class="mg-feed"><i class="uk-icon-rss uk-icon-medium"></i> ATOM</a>
            </div>
            
            <div class="uk-panel uk-panel-box">
                <h3 class="uk-panel-title">Contacts</h3>
                <a class="mg-icon-link" href="https://www.linkedin.com/in/priyankatyagi">
                    <i class="uk-icon-LinkedIn uk-icon-medium"></i>
                </a>
                <a class="mg-icon-link" href="https://github.com/ptyagicodecamp">
                    <i class="uk-icon-Github uk-icon-medium"></i>
                </a>
                <a class="mg-icon-link" href="https://medium.com/@ptyagicodecamp">
                    <i class="uk-icon-Medium uk-icon-medium"></i>
                </a>
                <a class="mg-icon-link" href="https://about.me/priyankatyagi">
                    <i class="uk-icon-About Me uk-icon-medium"></i>
                </a>
            </div>

        </div>

    </div>

</div>

</main>

<footer class="mg-footer">
    <div class="uk-container uk-container-center uk-text-center">

        <div class="mg-icons-small uk-subnav uk-visible-small">
            <li><a rel="alternate" type="application/atom+xml" href="../None" class="uk-icon-button uk-icon-rss"></a></li>
            <li>
                <a href="https://www.linkedin.com/in/priyankatyagi" class="uk-icon-button uk-icon-LinkedIn"></a>
            </li>
            <li>
                <a href="https://github.com/ptyagicodecamp" class="uk-icon-button uk-icon-Github"></a>
            </li>
            <li>
                <a href="https://medium.com/@ptyagicodecamp" class="uk-icon-button uk-icon-Medium"></a>
            </li>
            <li>
                <a href="https://about.me/priyankatyagi" class="uk-icon-button uk-icon-About Me"></a>
            </li>
        </div>

        <div class="mg-author uk-panel">
            <p></p>

            <p>Powered by <a href="http://blog.getpelican.com">Pelican</a>.<br class="uk-visible-small"> Theme <a href="https://github.com/lucachr/pelican-mg">mg</a> by <a href="https://github.com/lucachr">Luca Chiricozzi</a>.</p>
        </div>
    </div> 
</footer>

<div id="mg-offcanvas" class="uk-offcanvas">
    <div class="uk-offcanvas-bar">

        <form class="uk-search" action="search.html" data-uk-search>
            <input class="uk-search-field" type="search" name="q" id="tipue_search_input" autocomplete="off" placeholder="Search...">
        </form>

        <ul class="uk-nav uk-nav-offcanvas" data-uk-nav>
            <li class="uk-nav-header">Categories</li>
            <li ><a href="../category/development.html">Development</a></li>
            <li class="uk-nav-header">Pages</li>        
                    

            <li class="uk-nav-divider"></li>
            <li><a href="../">Archives</a></li>
        </ul>
    </div>
</div>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.10.2.min.js"><\/script>')</script>
<script src="//cdnjs.cloudflare.com/ajax/libs/uikit/2.15.0/js/uikit.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/uikit/2.15.0/js/components/search.min.js"></script>
<script src="/theme/js/jquery.sticky-kit.js"></script>
<script src="/theme/js/tipuesearch_set.js"></script>
<script src="/theme/js/tipuesearch.js"></script>
<script src="/theme/js/plugins.js"></script>
<script src="/theme/js/main.js"></script>

<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = ''; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function () {
 var s = document.createElement('script'); s.async = true;
 s.type = 'text/javascript';
 s.src = '//' + disqus_shortname + '.disqus.com/count.js';
 (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
 }());
</script>


</body>
</html>
