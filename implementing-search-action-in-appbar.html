<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="" />
    <meta name="author" content="Priyanka Tyagi" />
    <meta name="generator" content="Pelican (VoidyBootstrap theme)" />

    <title>Implementing Search action in AppBar. - techLog</title>

   
        <link rel="stylesheet"
              href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
              integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
              crossorigin="anonymous" />
      <link rel="stylesheet"
            href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
            integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN"
            crossorigin="anonymous">


      <link rel="stylesheet" href="https://ptyagicodecamp.github.io/theme/css/pygment.css" />
      <link rel="stylesheet" href="https://ptyagicodecamp.github.io/theme/css/voidybootstrap.css" />

    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js" integrity="sha384-FFgGfda92tXC8nCNOxrCQ3R8x1TNkMFqDZVQdDaaJiiVbjkPBXIJBx0o7ETjy8Bh" crossorigin="anonymous"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js" integrity="sha384-ZoaMbDF+4LeFxg6WdScQ9nnR1QC2MIRxA1O9KWEXQwns1G8UNyIEZIQidzb0T1fo" crossorigin="anonymous"></script>
    <![endif]-->

    <link rel="shortcut icon" href="https://ptyagicodecamp.github.io/favicon.ico" />
        <link href="https://ptyagicodecamp.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="techLog Atom Feed" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-133714063-1', '');
  ga('send', 'pageview');

</script>
  </head>

  <body>
   
    <nav class="navbar navbar-default">
      <div class="container">
	   <div class="navbar-header">
		<button type="button" class="navbar-toggle" 
				data-toggle="collapse" data-target="#main-navbar-collapse">
		  <span class="sr-only">Toggle navigation</span>
		  <span class="icon-bar"></span>
		  <span class="icon-bar"></span>
		  <span class="icon-bar"></span>
		</button>
		<a class="navbar-brand" href="https://ptyagicodecamp.github.io/" rel="home">
          <i class="fa fa-home fa-fw fa-lg"> </i> </a>
       </div>

      <div class="collapse navbar-collapse" id="main-navbar-collapse">
        <ul class="nav navbar-nav">
            <li class="divider"></li>
            <li class="">
              <a href="https://ptyagicodecamp.github.io/archives.html">Archives</a>
            </li>
          <li class="divider"></li>
            <li><a href="https://ptyagicodecamp.github.io/feeds/all.atom.xml" 
                   type="application/atom+xml" rel="alternate">
                <i class="fa fa-rss fa-fw fa-lg"></i> </a></li>
        </ul> <!-- /nav -->
      </div> <!-- /navbar-collapse -->
	  </div> <!-- /container -->
    </nav> <!-- /navbar -->

	<div class="jumbotron" id="overview">
	  <div class="container">
		<h1><a href="https://ptyagicodecamp.github.io/">techLog</a></h1>
		<p class="lead">Explore | Android | Software Engineering</p>
	  </div>
	</div>

    <div class="container" id="main-container">
      <div class="row">
        <div class="col-md-9" id="content">
<article itemscope="itemscope" itemtype="http://schema.org/BlogPosting">
  <header class="article-header">
<abbr class="article-header-date">
  Wed 06 February 2019
</abbr> <h1>
  <a href="https://ptyagicodecamp.github.io/implementing-search-action-in-appbar.html" rel="bookmark"
     title="Permalink to Implementing Search action in AppBar.">
    Implementing Search action in AppBar.
  </a>
</h1><div class="article-header-info">
  <p>
      Posted by <a href="https://ptyagicodecamp.github.io/author/ptyagi.html">ptyagi</a>
    in 
    <a href="https://ptyagicodecamp.github.io/category/development-flutter-cross-platform.html">
      Development, Flutter, Cross-platform</a>
    &nbsp;&nbsp;
  </p>
</div> <!-- /.article-header-info -->  </header>
  <div class="content-body" itemprop="text articleBody">
	<h2>Search in AppBar</h2>
<p>In today's recipe, I'll show you how search action can be
integrated at top of the page. I'll be using Flutter's <a href="https://docs.flutter.io/flutter/material/SearchDelegate-class.html">SearchDelegate</a>
component to achieve this. It comes packed with support for populating suggestions in search bar,
adding actions items to the right side of the search bar. I'm using dart's library <code>english_words</code> to
populate the list of words.</p>
<p><strong><em>Target Audience:</em></strong> Beginner</p>
<p><strong><em>Recipe:</em></strong> Implementing Search action in AppBar using Flutter for Android and iOS mobile apps.</p>
<p><strong><em>Focus Widget:</em></strong> <a href="https://docs.flutter.io/flutter/material/SearchDelegate-class.html">SearchDelegate</a></p>
<p><strong><em>Goal:</em></strong> In this recipe, I'll show you :
1. How to populate sorted english word list in app and search for a given word using Search bar at the top of the application.
2. How to build suggestion list for search bar.
3. How to add actions like "clear" to reset search bar, and a dummy action "mic" for voice input.</p>
<p><img alt="Sorted Wordlist" src="https://ptyagicodecamp.github.io/wordlist.png">
<img alt="Search in Wordlist" src="https://ptyagicodecamp.github.io/wordlist_search.png"></p>
<p>Checkout in action:
<iframe width="560" height="315" src="https://www.youtube.com/embed/GuP1Voc4pTw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></p>
<h3>Lets's go!</h3>
<p>Step #0: Create "Flutter Application" project in Android Studio.</p>
<p>Step #1. Get dependencies. First thing to add <code>english_words</code> dependency in
<code>pubspec.yaml</code> to be able to populate English words in our recipe app's word list.</p>
<div class="highlight"><pre><span></span><span class="n">dependencies</span><span class="o">:</span>
  <span class="n">flutter</span><span class="o">:</span>
    <span class="n">sdk</span><span class="o">:</span> <span class="n">flutter</span>
  <span class="err">#</span> <span class="n">This</span> <span class="k">is</span> <span class="n">needed</span> <span class="n">to</span> <span class="n">populate</span> <span class="n">English</span> <span class="n">words</span> <span class="k">in</span> <span class="n">app</span><span class="err">&#39;</span><span class="n">s</span> <span class="n">word</span> <span class="n">list</span><span class="o">.</span>
  <span class="n">english_words</span><span class="o">:</span> <span class="o">^</span><span class="mf">3.1</span><span class="o">.</span><span class="mi">3</span>
</pre></div>


<p>Step #2. Display Word list 
To display English word list as list in app, first thing is to import the dependency in <code>main.dart</code> file:</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="s1">&#39;package:english_words/english_words.dart&#39;</span> <span class="k">as</span> <span class="n">words</span><span class="p">;</span>
</pre></div>


<p>Step #3. Initialize word list in <code>SearchAppBarRecipeState</code> class.
Now, in the <code>_SearchAppBarRecipeState</code> class, fetch the list of words like below. Make sure
that you've a list data structure to hold word list. I'm using <code>kWords</code> for this purpose.</p>
<div class="highlight"><pre><span></span><span class="kr">class</span> <span class="nx">_SearchAppBarRecipeState</span> <span class="kr">extends</span> <span class="nx">State</span><span class="o">&lt;</span><span class="nx">SeachAppBarRecipe</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="c1">//Data structure to hold word list</span>
  <span class="kr">final</span> <span class="nx">List</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span> <span class="nx">kWords</span><span class="p">;</span>

  <span class="p">...</span>

    <span class="c1">//Initializing kWords list with data fetched from english_words library</span>
  <span class="nx">_SearchAppBarRecipeState</span><span class="p">()</span>
      <span class="o">:</span> <span class="nx">kWords</span> <span class="o">=</span> <span class="nx">List</span><span class="p">.</span><span class="nx">from</span><span class="p">(</span><span class="nx">Set</span><span class="p">.</span><span class="nx">from</span><span class="p">(</span><span class="nx">words</span><span class="p">.</span><span class="nx">all</span><span class="p">)),</span>
        <span class="kr">super</span><span class="p">();</span>

  <span class="p">...</span>
<span class="p">}</span>
</pre></div>


<p>Step #4. Sorting word list.
You'll notice at this point that data is un-sorted at this point. 
Let's make it alphabetically sorted as below:</p>
<div class="highlight"><pre><span></span><span class="kr">class</span> <span class="nx">_SearchAppBarRecipeState</span> <span class="kr">extends</span> <span class="nx">State</span><span class="o">&lt;</span><span class="nx">SeachAppBarRecipe</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="kr">final</span> <span class="nx">List</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span> <span class="nx">kWords</span><span class="p">;</span>
  <span class="p">...</span>

  <span class="c1">//Initializing with sorted list of english words</span>
  <span class="nx">_SearchAppBarRecipeState</span><span class="p">()</span>
      <span class="o">:</span> <span class="nx">kWords</span> <span class="o">=</span> <span class="nx">List</span><span class="p">.</span><span class="nx">from</span><span class="p">(</span><span class="nx">Set</span><span class="p">.</span><span class="nx">from</span><span class="p">(</span><span class="nx">words</span><span class="p">.</span><span class="nx">all</span><span class="p">))</span>
    <span class="p">..</span><span class="nx">sort</span><span class="p">(</span>
          <span class="p">(</span><span class="nx">w1</span><span class="p">,</span> <span class="nx">w2</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">w1</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">().</span><span class="nx">compareTo</span><span class="p">(</span><span class="nx">w2</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()),</span>
    <span class="p">),</span>
        <span class="kr">super</span><span class="p">();</span>
   <span class="p">...</span>
<span class="p">}</span>
</pre></div>


<p>Step #5. Setup <code>SearchDelegate</code> to implement Search AppBar.
Search delegate is where all the magic happens. It holds two list of words. One list is of
the general word list passed during initialization. Another list <code>_history</code> contains the list of history words.
You can pre-populate <code>_history</code> list to give a baseline for history search items. This list will be shown when
user clicks on the search bar.</p>
<div class="highlight"><pre><span></span><span class="kr">class</span> <span class="nx">_SearchAppBarDelegate</span> <span class="kr">extends</span> <span class="nx">SearchDelegate</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="c1">//list holds the full word list</span>
  <span class="kr">final</span> <span class="nx">List</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span> <span class="nx">_words</span><span class="p">;</span>

  <span class="c1">//list holds history search words.</span>
  <span class="kr">final</span> <span class="nx">List</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span> <span class="nx">_history</span><span class="p">;</span>

    <span class="c1">//initialize delegate with full word list and history words</span>
  <span class="nx">_SearchAppBarDelegate</span><span class="p">(</span><span class="nx">List</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span> <span class="nx">words</span><span class="p">)</span>
      <span class="o">:</span> <span class="nx">_words</span> <span class="o">=</span> <span class="nx">words</span><span class="p">,</span>
  <span class="c1">//pre-populated history of words</span>
        <span class="nx">_history</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span><span class="p">[</span><span class="s1">&#39;apple&#39;</span><span class="p">,</span> <span class="s1">&#39;orange&#39;</span><span class="p">,</span> <span class="s1">&#39;banana&#39;</span><span class="p">,</span> <span class="s1">&#39;watermelon&#39;</span><span class="p">],</span>
        <span class="kr">super</span><span class="p">();</span>

  <span class="p">...</span>
<span class="p">}</span>
</pre></div>


<p>Step #6. After setting up words list options in delegate, now its time to pick up an icon that will be placed at the
left side of search bar. Mostly, this icon menu is meant for navigating back to previous screen.</p>
<div class="highlight"><pre><span></span><span class="kr">class</span> <span class="nx">_SearchAppBarDelegate</span> <span class="kr">extends</span> <span class="nx">SearchDelegate</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="p">...</span>

    <span class="c1">// Setting leading icon for the search bar.</span>
    <span class="c1">//Clicking on back arrow will take control to main page</span>
    <span class="kd">@override</span>
    <span class="nx">Widget</span> <span class="nx">buildLeading</span><span class="p">(</span><span class="nx">BuildContext</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">IconButton</span><span class="p">(</span>
        <span class="nx">tooltip</span><span class="o">:</span> <span class="s1">&#39;Back&#39;</span><span class="p">,</span>
        <span class="nx">icon</span>: <span class="kt">AnimatedIcon</span><span class="p">(</span>
          <span class="nx">icon</span>: <span class="kt">AnimatedIcons.menu_arrow</span><span class="p">,</span>
          <span class="nx">progress</span>: <span class="kt">transitionAnimation</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="nx">onPressed</span><span class="o">:</span> <span class="p">()</span> <span class="p">{</span>
          <span class="c1">//Take control back to previous page</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">close</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>
        <span class="p">},</span>
      <span class="p">);</span>
    <span class="p">}</span>

  <span class="p">...</span>
<span class="p">}</span>
</pre></div>


<p>Alright we got the icon for search bar ! What next ? </p>
<p>Step #7. Now it's time to implement <code>buildResults</code> method to show searched item. This is where search query <code>this.query</code> will
display searched item. For sake of simplicity, I'll be adding two widgets only.
First widget is <code>Text</code> and will display message '===Your Word Choice==='. Second widget is
<code>GestureDetector</code> which has it's another <code>Text</code> widget as its <code>child</code>. Tapping on the <code>Text</code> widget will
take control back to previous page along with <code>this.query</code> parameter to display the searched word in main page.</p>
<div class="highlight"><pre><span></span><span class="kr">class</span> <span class="nx">_SearchAppBarDelegate</span> <span class="kr">extends</span> <span class="nx">SearchDelegate</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="p">...</span>

  <span class="c1">//Builds page to populate search results.</span>
  <span class="kd">@override</span>
  <span class="nx">Widget</span> <span class="nx">buildResults</span><span class="p">(</span><span class="nx">BuildContext</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">Padding</span><span class="p">(</span>
      <span class="nx">padding</span>: <span class="kt">const</span> <span class="nx">EdgeInsets</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="mf">8.0</span><span class="p">),</span>
      <span class="nx">child</span>: <span class="kt">Center</span><span class="p">(</span>
        <span class="nx">child</span>: <span class="kt">Column</span><span class="p">(</span>
          <span class="nx">mainAxisSize</span>: <span class="kt">MainAxisSize.min</span><span class="p">,</span>
          <span class="nx">children</span><span class="o">:</span> <span class="o">&lt;</span><span class="nx">Widget</span><span class="o">&gt;</span><span class="p">[</span>
            <span class="nx">Text</span><span class="p">(</span><span class="s1">&#39;===Your Word Choice===&#39;</span><span class="p">),</span>
            <span class="nx">GestureDetector</span><span class="p">(</span>
              <span class="nx">onTap</span><span class="o">:</span> <span class="p">()</span> <span class="p">{</span>
                <span class="c1">//Define your action when clicking on result item.</span>
                <span class="c1">//In this example, it simply closes the page</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">close</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">query</span><span class="p">);</span>
              <span class="p">},</span>
              <span class="nx">child</span>: <span class="kt">Text</span><span class="p">(</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">query</span><span class="p">,</span>
                <span class="nx">style</span>: <span class="kt">Theme.of</span><span class="p">(</span><span class="nx">context</span><span class="p">)</span>
                    <span class="p">.</span><span class="nx">textTheme</span>
                    <span class="p">.</span><span class="nx">display2</span>
                    <span class="p">.</span><span class="nx">copyWith</span><span class="p">(</span><span class="nx">fontWeight</span>: <span class="kt">FontWeight.normal</span><span class="p">),</span>
              <span class="p">),</span>
            <span class="p">),</span>
          <span class="p">],</span>
        <span class="p">),</span>
      <span class="p">),</span>
    <span class="p">);</span>
  <span class="p">}</span>

  <span class="p">...</span>
<span class="p">}</span>
</pre></div>


<p>Step #8. Next, it's time for implementing <code>buildSuggestions</code> method of SearchDelegate class. 
So, what does building suggestions mean ? This is the list of suggestions for words that you'll see
when typing your search query in search bar. There're two parts of this. 
First, we've to pass the list of words that could be displayed as suggestions. 
Second, we need to implement the UI widget to display this suggestion list.</p>
<p>For data part, we display pre-populated history words when query term is empty. When user
starts typing then we show all the words that starts with search terms entered in search bar. That's it !</p>
<div class="highlight"><pre><span></span><span class="kr">class</span> <span class="nx">_SearchAppBarDelegate</span> <span class="kr">extends</span> <span class="nx">SearchDelegate</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="p">...</span>

  <span class="c1">// Suggestions list while typing search query - this.query.</span>
  <span class="kd">@override</span>
  <span class="nx">Widget</span> <span class="nx">buildSuggestions</span><span class="p">(</span><span class="nx">BuildContext</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">final</span> <span class="nx">Iterable</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span> <span class="nx">suggestions</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">isEmpty</span>
        <span class="o">?</span> <span class="nx">_history</span>
        : <span class="kt">_words.where</span><span class="p">((</span><span class="nx">word</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">word</span><span class="p">.</span><span class="nx">startsWith</span><span class="p">(</span><span class="nx">query</span><span class="p">));</span>

        <span class="p">...</span>
  <span class="p">}</span>

  <span class="p">...</span>
<span class="p">}</span>
</pre></div>


<p>It's UI widget's turn now. As you can see <code>buildSuggestions</code> method returns a <code>Widget</code>.
We'll make a separate class say <code>_WordSuggestionList</code> to populate suggestion list widget and will
return it from <code>buildSuggestions</code>.
<code>_WordSuggestionList</code> is going to be a <code>StatelessWidget</code>, and has three things: First, list of suggestions.
Second, search query and last a callback say <code>ValueChanged&lt;String&gt; onSelected</code>. It'll be <code>ListView</code>
of size of number of suggestions provided. Each suggestion is displayed in <code>ListTile</code> widget. This widget will show
<code>history</code> icon for items fetched from pre-populated history words only. Text for widget will be updated as user is typing the search query.</p>
<div class="highlight"><pre><span></span><span class="kr">class</span> <span class="nx">_WordSuggestionList</span> <span class="kr">extends</span> <span class="nx">StatelessWidget</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">_WordSuggestionList</span><span class="p">({</span><span class="k">this</span><span class="p">.</span><span class="nx">suggestions</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">query</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">onSelected</span><span class="p">});</span>

  <span class="kr">final</span> <span class="nx">List</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span> <span class="nx">suggestions</span><span class="p">;</span>
  <span class="kr">final</span> <span class="nb">String</span> <span class="nx">query</span><span class="p">;</span>
  <span class="kr">final</span> <span class="nx">ValueChanged</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span> <span class="nx">onSelected</span><span class="p">;</span>

  <span class="kd">@override</span>
  <span class="nx">Widget</span> <span class="nx">build</span><span class="p">(</span><span class="nx">BuildContext</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">final</span> <span class="nx">textTheme</span> <span class="o">=</span> <span class="nx">Theme</span><span class="p">.</span><span class="nx">of</span><span class="p">(</span><span class="nx">context</span><span class="p">).</span><span class="nx">textTheme</span><span class="p">.</span><span class="nx">subhead</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">ListView</span><span class="p">.</span><span class="nx">builder</span><span class="p">(</span>
      <span class="nx">itemCount</span>: <span class="kt">suggestions.length</span><span class="p">,</span>
      <span class="nx">itemBuilder</span><span class="o">:</span> <span class="p">(</span><span class="nx">BuildContext</span> <span class="nx">context</span><span class="p">,</span> <span class="kr">int</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="kr">final</span> <span class="nb">String</span> <span class="nx">suggestion</span> <span class="o">=</span> <span class="nx">suggestions</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="k">return</span> <span class="nx">ListTile</span><span class="p">(</span>
          <span class="nx">leading</span>: <span class="kt">query.isEmpty</span> <span class="o">?</span> <span class="nx">Icon</span><span class="p">(</span><span class="nx">Icons</span><span class="p">.</span><span class="nx">history</span><span class="p">)</span> <span class="o">:</span> <span class="nx">Icon</span><span class="p">(</span><span class="kc">null</span><span class="p">),</span>
          <span class="c1">// Highlight the substring that matched the query.</span>
          <span class="nx">title</span>: <span class="kt">RichText</span><span class="p">(</span>
            <span class="nx">text</span>: <span class="kt">TextSpan</span><span class="p">(</span>
              <span class="nx">text</span>: <span class="kt">suggestion.substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">query</span><span class="p">.</span><span class="nx">length</span><span class="p">),</span>
              <span class="nx">style</span>: <span class="kt">textTheme.copyWith</span><span class="p">(</span><span class="nx">fontWeight</span>: <span class="kt">FontWeight.bold</span><span class="p">),</span>
              <span class="nx">children</span><span class="o">:</span> <span class="o">&lt;</span><span class="nx">TextSpan</span><span class="o">&gt;</span><span class="p">[</span>
                <span class="nx">TextSpan</span><span class="p">(</span>
                  <span class="nx">text</span>: <span class="kt">suggestion.substring</span><span class="p">(</span><span class="nx">query</span><span class="p">.</span><span class="nx">length</span><span class="p">),</span>
                  <span class="nx">style</span>: <span class="kt">textTheme</span><span class="p">,</span>
                <span class="p">),</span>
              <span class="p">],</span>
            <span class="p">),</span>
          <span class="p">),</span>
          <span class="nx">onTap</span><span class="o">:</span> <span class="p">()</span> <span class="p">{</span>
            <span class="nx">onSelected</span><span class="p">(</span><span class="nx">suggestion</span><span class="p">);</span>
          <span class="p">},</span>
        <span class="p">);</span>
      <span class="p">},</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>Let's plug-in <code>_WordSuggestionList</code> back into <code>buildSuggestions</code> method:</p>
<div class="highlight"><pre><span></span><span class="kr">class</span> <span class="nx">_SearchAppBarDelegate</span> <span class="kr">extends</span> <span class="nx">SearchDelegate</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="p">...</span>

  <span class="c1">// Suggestions list while typing search query - this.query.</span>
  <span class="kd">@override</span>
  <span class="nx">Widget</span> <span class="nx">buildSuggestions</span><span class="p">(</span><span class="nx">BuildContext</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">final</span> <span class="nx">Iterable</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span> <span class="nx">suggestions</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">isEmpty</span>
        <span class="o">?</span> <span class="nx">_history</span>
        : <span class="kt">_words.where</span><span class="p">((</span><span class="nx">word</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">word</span><span class="p">.</span><span class="nx">startsWith</span><span class="p">(</span><span class="nx">query</span><span class="p">));</span>

    <span class="c1">//calling wordsuggestion list    </span>
    <span class="k">return</span> <span class="nx">_WordSuggestionList</span><span class="p">(</span>
          <span class="nx">query</span>: <span class="kt">this.query</span><span class="p">,</span>
          <span class="nx">suggestions</span>: <span class="kt">suggestions.toList</span><span class="p">(),</span>
          <span class="nx">onSelected</span><span class="o">:</span> <span class="p">(</span><span class="nb">String</span> <span class="nx">suggestion</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">query</span> <span class="o">=</span> <span class="nx">suggestion</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_history</span><span class="p">.</span><span class="nx">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">suggestion</span><span class="p">);</span>
            <span class="nx">showResults</span><span class="p">(</span><span class="nx">context</span><span class="p">);</span>
          <span class="p">},</span>
  <span class="p">}</span>

  <span class="p">...</span>
<span class="p">}</span>
</pre></div>


<p>Step #9. Building actions in SearchBar.
Last step is to add action menus in SearchBar's right side. I'll be adding two menu actions.
One is "Clear" icon to clear search query from search bar. Another is a "mic" icon, that could be
improved to accept voice input, which is beyond the scope of this recipe. However, if you would like me 
to write about another recipe for accepting voice input, feel free to contact me as mentioned at the end of this post.</p>
<div class="highlight"><pre><span></span><span class="kr">class</span> <span class="nx">_SearchAppBarDelegate</span> <span class="kr">extends</span> <span class="nx">SearchDelegate</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="p">...</span>

<span class="c1">// Action buttons at the right of search bar.</span>
  <span class="kd">@override</span>
  <span class="nx">List</span><span class="o">&lt;</span><span class="nx">Widget</span><span class="o">&gt;</span> <span class="nx">buildActions</span><span class="p">(</span><span class="nx">BuildContext</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">Widget</span><span class="o">&gt;</span><span class="p">[</span>
      <span class="nx">query</span><span class="p">.</span><span class="nx">isNotEmpty</span> <span class="o">?</span>
      <span class="nx">IconButton</span><span class="p">(</span>
        <span class="nx">tooltip</span><span class="o">:</span> <span class="s1">&#39;Clear&#39;</span><span class="p">,</span>
        <span class="nx">icon</span>: <span class="kt">const</span> <span class="nx">Icon</span><span class="p">(</span><span class="nx">Icons</span><span class="p">.</span><span class="nx">clear</span><span class="p">),</span>
        <span class="nx">onPressed</span><span class="o">:</span> <span class="p">()</span> <span class="p">{</span>
          <span class="nx">query</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
          <span class="nx">showSuggestions</span><span class="p">(</span><span class="nx">context</span><span class="p">);</span>
        <span class="p">},</span>
      <span class="p">)</span> <span class="o">:</span> <span class="nx">IconButton</span><span class="p">(</span>
        <span class="nx">icon</span>: <span class="kt">const</span> <span class="nx">Icon</span><span class="p">(</span><span class="nx">Icons</span><span class="p">.</span><span class="nx">mic</span><span class="p">),</span>
        <span class="nx">tooltip</span><span class="o">:</span> <span class="s1">&#39;Voice input&#39;</span><span class="p">,</span>
        <span class="nx">onPressed</span><span class="o">:</span> <span class="p">()</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">query</span> <span class="o">=</span> <span class="s1">&#39;TBW: Get input from voice&#39;</span><span class="p">;</span>
        <span class="p">},</span>

      <span class="p">),</span>
    <span class="p">];</span>
  <span class="p">}</span>

  <span class="p">...</span>
<span class="p">}</span>
</pre></div>


<p>Step #10. Finally, call Search Delegate from <code>SearchAppBarRecipeState</code>.
After creating <code>SearchDelegate</code> class, call it from <code>_SearchAppBarRecipeState</code> class and initialize it in <code>initState</code>.</p>
<div class="highlight"><pre><span></span><span class="kr">class</span> <span class="nx">_SearchAppBarRecipeState</span> <span class="kr">extends</span> <span class="nx">State</span><span class="o">&lt;</span><span class="nx">SeachAppBarRecipe</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="kr">final</span> <span class="nx">List</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span> <span class="nx">kWords</span><span class="p">;</span>

    <span class="c1">//Calling search delegate class</span>
    <span class="nx">_SearchAppBarDelegate</span> <span class="nx">_searchDelegate</span><span class="p">;</span>
    <span class="p">...</span>

    <span class="kd">@override</span>
    <span class="k">void</span> <span class="nx">initState() {</span>
       <span class="kr">super</span><span class="p">.</span><span class="nx">initState</span><span class="p">();</span>
       <span class="c1">//Initializing search delegate with sorted list of English words</span>
       <span class="nx">_searchDelegate</span> <span class="o">=</span> <span class="nx">_SearchAppBarDelegate</span><span class="p">(</span><span class="nx">kWords</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="p">...</span>
<span class="p">}</span>
</pre></div>


<p>That's it !</p>
<h4>Complete example code</h4>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="s1">&#39;package:flutter/material.dart&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="s1">&#39;package:english_words/english_words.dart&#39;</span> <span class="k">as</span> <span class="n">words</span><span class="p">;</span>

<span class="n">void</span> <span class="n">main</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="n">runApp</span><span class="p">(</span><span class="n">MyApp</span><span class="p">());</span>

<span class="k">class</span> <span class="nc">MyApp</span> <span class="n">extends</span> <span class="n">StatelessWidget</span> <span class="p">{</span>
  <span class="o">//</span> <span class="n">This</span> <span class="n">widget</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">root</span> <span class="n">of</span> <span class="n">your</span> <span class="n">application</span><span class="o">.</span>
  <span class="nd">@override</span>
  <span class="n">Widget</span> <span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">MaterialApp</span><span class="p">(</span>
      <span class="n">title</span><span class="p">:</span> <span class="s1">&#39;SeachAppBarRecipe&#39;</span><span class="p">,</span>
      <span class="n">theme</span><span class="p">:</span> <span class="n">ThemeData</span><span class="p">(</span>
        <span class="n">primarySwatch</span><span class="p">:</span> <span class="n">Colors</span><span class="o">.</span><span class="n">blue</span><span class="p">,</span>
      <span class="p">),</span>
      <span class="n">home</span><span class="p">:</span> <span class="n">SeachAppBarRecipe</span><span class="p">(</span><span class="n">title</span><span class="p">:</span> <span class="s1">&#39;SeachAppBarRecipe&#39;</span><span class="p">),</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">SeachAppBarRecipe</span> <span class="n">extends</span> <span class="n">StatefulWidget</span> <span class="p">{</span>
  <span class="n">SeachAppBarRecipe</span><span class="p">({</span><span class="n">Key</span> <span class="n">key</span><span class="p">,</span> <span class="n">this</span><span class="o">.</span><span class="n">title</span><span class="p">})</span> <span class="p">:</span> <span class="nb">super</span><span class="p">(</span><span class="n">key</span><span class="p">:</span> <span class="n">key</span><span class="p">);</span>

  <span class="n">final</span> <span class="n">String</span> <span class="n">title</span><span class="p">;</span>

  <span class="nd">@override</span>
  <span class="n">_SearchAppBarRecipeState</span> <span class="n">createState</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="n">_SearchAppBarRecipeState</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">_SearchAppBarRecipeState</span> <span class="n">extends</span> <span class="n">State</span><span class="o">&lt;</span><span class="n">SeachAppBarRecipe</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="n">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">kWords</span><span class="p">;</span>
  <span class="n">_SearchAppBarDelegate</span> <span class="n">_searchDelegate</span><span class="p">;</span>

  <span class="o">//</span><span class="n">Initializing</span> <span class="k">with</span> <span class="nb">sorted</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">english</span> <span class="n">words</span>
  <span class="n">_SearchAppBarRecipeState</span><span class="p">()</span>
      <span class="p">:</span> <span class="n">kWords</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="n">from</span><span class="p">(</span><span class="n">Set</span><span class="o">.</span><span class="n">from</span><span class="p">(</span><span class="n">words</span><span class="o">.</span><span class="n">all</span><span class="p">))</span>
    <span class="o">..</span><span class="n">sort</span><span class="p">(</span>
          <span class="p">(</span><span class="n">w1</span><span class="p">,</span> <span class="n">w2</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">w1</span><span class="o">.</span><span class="n">toLowerCase</span><span class="p">()</span><span class="o">.</span><span class="n">compareTo</span><span class="p">(</span><span class="n">w2</span><span class="o">.</span><span class="n">toLowerCase</span><span class="p">()),</span>
    <span class="p">),</span>
        <span class="nb">super</span><span class="p">();</span>


  <span class="nd">@override</span>
  <span class="n">void</span> <span class="n">initState</span><span class="p">()</span> <span class="p">{</span>
    <span class="nb">super</span><span class="o">.</span><span class="n">initState</span><span class="p">();</span>
    <span class="o">//</span><span class="n">Initializing</span> <span class="n">search</span> <span class="n">delegate</span> <span class="k">with</span> <span class="nb">sorted</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">English</span> <span class="n">words</span>
    <span class="n">_searchDelegate</span> <span class="o">=</span> <span class="n">_SearchAppBarDelegate</span><span class="p">(</span><span class="n">kWords</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nd">@override</span>
  <span class="n">Widget</span> <span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">Scaffold</span><span class="p">(</span>
      <span class="n">appBar</span><span class="p">:</span> <span class="n">AppBar</span><span class="p">(</span>
        <span class="n">automaticallyImplyLeading</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="n">title</span><span class="p">:</span> <span class="n">Text</span><span class="p">(</span><span class="s1">&#39;Word List&#39;</span><span class="p">),</span>
        <span class="n">actions</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Widget</span><span class="o">&gt;</span><span class="p">[</span>
          <span class="o">//</span><span class="n">Adding</span> <span class="n">the</span> <span class="n">search</span> <span class="n">widget</span> <span class="ow">in</span> <span class="n">AppBar</span>
          <span class="n">IconButton</span><span class="p">(</span>
            <span class="n">tooltip</span><span class="p">:</span> <span class="s1">&#39;Search&#39;</span><span class="p">,</span>
            <span class="n">icon</span><span class="p">:</span> <span class="n">const</span> <span class="n">Icon</span><span class="p">(</span><span class="n">Icons</span><span class="o">.</span><span class="n">search</span><span class="p">),</span>
            <span class="o">//</span><span class="n">Don</span><span class="s1">&#39;t block the main thread</span>
            <span class="n">onPressed</span><span class="p">:</span> <span class="p">()</span> <span class="p">{</span>
              <span class="n">showSearchPage</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">_searchDelegate</span><span class="p">);</span>
            <span class="p">},</span>
          <span class="p">),</span>
        <span class="p">],</span>
      <span class="p">),</span>
      <span class="n">body</span><span class="p">:</span> <span class="n">Scrollbar</span><span class="p">(</span>
        <span class="o">//</span><span class="n">Displaying</span> <span class="nb">all</span> <span class="n">English</span> <span class="n">words</span> <span class="ow">in</span> <span class="nb">list</span> <span class="ow">in</span> <span class="n">app</span><span class="s1">&#39;s main page</span>
        <span class="n">child</span><span class="p">:</span> <span class="n">ListView</span><span class="o">.</span><span class="n">builder</span><span class="p">(</span>
          <span class="n">itemCount</span><span class="p">:</span> <span class="n">kWords</span><span class="o">.</span><span class="n">length</span><span class="p">,</span>
          <span class="n">itemBuilder</span><span class="p">:</span> <span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">idx</span><span class="p">)</span> <span class="o">=&gt;</span>
              <span class="n">ListTile</span><span class="p">(</span>
                <span class="n">title</span><span class="p">:</span> <span class="n">Text</span><span class="p">(</span><span class="n">kWords</span><span class="p">[</span><span class="n">idx</span><span class="p">]),</span>
                <span class="n">onTap</span><span class="p">:</span> <span class="p">()</span> <span class="p">{</span>
                  <span class="n">Scaffold</span><span class="o">.</span><span class="n">of</span><span class="p">(</span><span class="n">context</span><span class="p">)</span><span class="o">.</span><span class="n">showSnackBar</span><span class="p">(</span>
                      <span class="n">SnackBar</span><span class="p">(</span>
                          <span class="n">content</span><span class="p">:</span> <span class="n">Text</span><span class="p">(</span><span class="s2">&quot;Click the Search action&quot;</span><span class="p">),</span>
                          <span class="n">action</span><span class="p">:</span> <span class="n">SnackBarAction</span><span class="p">(</span>
                            <span class="n">label</span><span class="p">:</span> <span class="s1">&#39;Search&#39;</span><span class="p">,</span>
                            <span class="n">onPressed</span><span class="p">:</span> <span class="p">(){</span>
                              <span class="n">showSearchPage</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">_searchDelegate</span><span class="p">);</span>
                            <span class="p">},</span>
                          <span class="p">)</span>
                      <span class="p">)</span>
                  <span class="p">);</span>
                <span class="p">},</span>
              <span class="p">),</span>
        <span class="p">),</span>
      <span class="p">),</span>
    <span class="p">);</span>
  <span class="p">}</span>

  <span class="o">//</span><span class="n">Shows</span> <span class="n">Search</span> <span class="n">result</span>
  <span class="n">void</span> <span class="n">showSearchPage</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">,</span>
      <span class="n">_SearchAppBarDelegate</span> <span class="n">searchDelegate</span><span class="p">)</span> <span class="n">async</span> <span class="p">{</span>
    <span class="n">final</span> <span class="n">String</span> <span class="n">selected</span> <span class="o">=</span> <span class="n">await</span> <span class="n">showSearch</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">(</span>
      <span class="n">context</span><span class="p">:</span> <span class="n">context</span><span class="p">,</span>
      <span class="n">delegate</span><span class="p">:</span> <span class="n">searchDelegate</span><span class="p">,</span>
    <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">selected</span> <span class="o">!=</span> <span class="n">null</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">Scaffold</span><span class="o">.</span><span class="n">of</span><span class="p">(</span><span class="n">context</span><span class="p">)</span><span class="o">.</span><span class="n">showSnackBar</span><span class="p">(</span>
        <span class="n">SnackBar</span><span class="p">(</span>
          <span class="n">content</span><span class="p">:</span> <span class="n">Text</span><span class="p">(</span><span class="s1">&#39;Your Word Choice: $selected&#39;</span><span class="p">),</span>
        <span class="p">),</span>
      <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="o">//</span><span class="n">Search</span> <span class="n">delegate</span>
<span class="k">class</span> <span class="nc">_SearchAppBarDelegate</span> <span class="n">extends</span> <span class="n">SearchDelegate</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="n">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">_words</span><span class="p">;</span>
  <span class="n">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">_history</span><span class="p">;</span>

  <span class="n">_SearchAppBarDelegate</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">words</span><span class="p">)</span>
      <span class="p">:</span> <span class="n">_words</span> <span class="o">=</span> <span class="n">words</span><span class="p">,</span>
  <span class="o">//</span><span class="n">pre</span><span class="o">-</span><span class="n">populated</span> <span class="n">history</span> <span class="n">of</span> <span class="n">words</span>
        <span class="n">_history</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">[</span><span class="s1">&#39;apple&#39;</span><span class="p">,</span> <span class="s1">&#39;orange&#39;</span><span class="p">,</span> <span class="s1">&#39;banana&#39;</span><span class="p">,</span> <span class="s1">&#39;watermelon&#39;</span><span class="p">],</span>
        <span class="nb">super</span><span class="p">();</span>

  <span class="o">//</span> <span class="n">Setting</span> <span class="n">leading</span> <span class="n">icon</span> <span class="k">for</span> <span class="n">the</span> <span class="n">search</span> <span class="n">bar</span><span class="o">.</span>
  <span class="o">//</span><span class="n">Clicking</span> <span class="n">on</span> <span class="n">back</span> <span class="n">arrow</span> <span class="n">will</span> <span class="n">take</span> <span class="n">control</span> <span class="n">to</span> <span class="n">main</span> <span class="n">page</span>
  <span class="nd">@override</span>
  <span class="n">Widget</span> <span class="n">buildLeading</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">IconButton</span><span class="p">(</span>
      <span class="n">tooltip</span><span class="p">:</span> <span class="s1">&#39;Back&#39;</span><span class="p">,</span>
      <span class="n">icon</span><span class="p">:</span> <span class="n">AnimatedIcon</span><span class="p">(</span>
        <span class="n">icon</span><span class="p">:</span> <span class="n">AnimatedIcons</span><span class="o">.</span><span class="n">menu_arrow</span><span class="p">,</span>
        <span class="n">progress</span><span class="p">:</span> <span class="n">transitionAnimation</span><span class="p">,</span>
      <span class="p">),</span>
      <span class="n">onPressed</span><span class="p">:</span> <span class="p">()</span> <span class="p">{</span>
        <span class="o">//</span><span class="n">Take</span> <span class="n">control</span> <span class="n">back</span> <span class="n">to</span> <span class="n">previous</span> <span class="n">page</span>
        <span class="n">this</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">null</span><span class="p">);</span>
      <span class="p">},</span>
    <span class="p">);</span>
  <span class="p">}</span>

  <span class="o">//</span> <span class="n">Builds</span> <span class="n">page</span> <span class="n">to</span> <span class="n">populate</span> <span class="n">search</span> <span class="n">results</span><span class="o">.</span>
  <span class="nd">@override</span>
  <span class="n">Widget</span> <span class="n">buildResults</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">Padding</span><span class="p">(</span>
      <span class="n">padding</span><span class="p">:</span> <span class="n">const</span> <span class="n">EdgeInsets</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="mf">8.0</span><span class="p">),</span>
      <span class="n">child</span><span class="p">:</span> <span class="n">Center</span><span class="p">(</span>
        <span class="n">child</span><span class="p">:</span> <span class="n">Column</span><span class="p">(</span>
          <span class="n">mainAxisSize</span><span class="p">:</span> <span class="n">MainAxisSize</span><span class="o">.</span><span class="n">min</span><span class="p">,</span>
          <span class="n">children</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Widget</span><span class="o">&gt;</span><span class="p">[</span>
            <span class="n">Text</span><span class="p">(</span><span class="s1">&#39;===Your Word Choice===&#39;</span><span class="p">),</span>
            <span class="n">GestureDetector</span><span class="p">(</span>
              <span class="n">onTap</span><span class="p">:</span> <span class="p">()</span> <span class="p">{</span>
                <span class="o">//</span><span class="n">Define</span> <span class="n">your</span> <span class="n">action</span> <span class="n">when</span> <span class="n">clicking</span> <span class="n">on</span> <span class="n">result</span> <span class="n">item</span><span class="o">.</span>
                <span class="o">//</span><span class="n">In</span> <span class="n">this</span> <span class="n">example</span><span class="p">,</span> <span class="n">it</span> <span class="n">simply</span> <span class="n">closes</span> <span class="n">the</span> <span class="n">page</span>
                <span class="n">this</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">this</span><span class="o">.</span><span class="n">query</span><span class="p">);</span>
              <span class="p">},</span>
              <span class="n">child</span><span class="p">:</span> <span class="n">Text</span><span class="p">(</span>
                <span class="n">this</span><span class="o">.</span><span class="n">query</span><span class="p">,</span>
                <span class="n">style</span><span class="p">:</span> <span class="n">Theme</span><span class="o">.</span><span class="n">of</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">textTheme</span>
                    <span class="o">.</span><span class="n">display2</span>
                    <span class="o">.</span><span class="n">copyWith</span><span class="p">(</span><span class="n">fontWeight</span><span class="p">:</span> <span class="n">FontWeight</span><span class="o">.</span><span class="n">normal</span><span class="p">),</span>
              <span class="p">),</span>
            <span class="p">),</span>
          <span class="p">],</span>
        <span class="p">),</span>
      <span class="p">),</span>
    <span class="p">);</span>
  <span class="p">}</span>

  <span class="o">//</span> <span class="n">Suggestions</span> <span class="nb">list</span> <span class="k">while</span> <span class="n">typing</span> <span class="n">search</span> <span class="n">query</span> <span class="o">-</span> <span class="n">this</span><span class="o">.</span><span class="n">query</span><span class="o">.</span>
  <span class="nd">@override</span>
  <span class="n">Widget</span> <span class="n">buildSuggestions</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">final</span> <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">suggestions</span> <span class="o">=</span> <span class="n">this</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">isEmpty</span>
        <span class="err">?</span> <span class="n">_history</span>
        <span class="p">:</span> <span class="n">_words</span><span class="o">.</span><span class="n">where</span><span class="p">((</span><span class="n">word</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">word</span><span class="o">.</span><span class="n">startsWith</span><span class="p">(</span><span class="n">query</span><span class="p">));</span>

    <span class="k">return</span> <span class="n">_WordSuggestionList</span><span class="p">(</span>
      <span class="n">query</span><span class="p">:</span> <span class="n">this</span><span class="o">.</span><span class="n">query</span><span class="p">,</span>
      <span class="n">suggestions</span><span class="p">:</span> <span class="n">suggestions</span><span class="o">.</span><span class="n">toList</span><span class="p">(),</span>
      <span class="n">onSelected</span><span class="p">:</span> <span class="p">(</span><span class="n">String</span> <span class="n">suggestion</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">this</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">suggestion</span><span class="p">;</span>
        <span class="n">this</span><span class="o">.</span><span class="n">_history</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">suggestion</span><span class="p">);</span>
        <span class="n">showResults</span><span class="p">(</span><span class="n">context</span><span class="p">);</span>
      <span class="p">},</span>
    <span class="p">);</span>
  <span class="p">}</span>

  <span class="o">//</span> <span class="n">Action</span> <span class="n">buttons</span> <span class="n">at</span> <span class="n">the</span> <span class="n">right</span> <span class="n">of</span> <span class="n">search</span> <span class="n">bar</span><span class="o">.</span>
  <span class="nd">@override</span>
  <span class="n">List</span><span class="o">&lt;</span><span class="n">Widget</span><span class="o">&gt;</span> <span class="n">buildActions</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">&lt;</span><span class="n">Widget</span><span class="o">&gt;</span><span class="p">[</span>
      <span class="n">query</span><span class="o">.</span><span class="n">isNotEmpty</span> <span class="err">?</span>
      <span class="n">IconButton</span><span class="p">(</span>
        <span class="n">tooltip</span><span class="p">:</span> <span class="s1">&#39;Clear&#39;</span><span class="p">,</span>
        <span class="n">icon</span><span class="p">:</span> <span class="n">const</span> <span class="n">Icon</span><span class="p">(</span><span class="n">Icons</span><span class="o">.</span><span class="n">clear</span><span class="p">),</span>
        <span class="n">onPressed</span><span class="p">:</span> <span class="p">()</span> <span class="p">{</span>
          <span class="n">query</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
          <span class="n">showSuggestions</span><span class="p">(</span><span class="n">context</span><span class="p">);</span>
        <span class="p">},</span>
      <span class="p">)</span> <span class="p">:</span> <span class="n">IconButton</span><span class="p">(</span>
        <span class="n">icon</span><span class="p">:</span> <span class="n">const</span> <span class="n">Icon</span><span class="p">(</span><span class="n">Icons</span><span class="o">.</span><span class="n">mic</span><span class="p">),</span>
        <span class="n">tooltip</span><span class="p">:</span> <span class="s1">&#39;Voice input&#39;</span><span class="p">,</span>
        <span class="n">onPressed</span><span class="p">:</span> <span class="p">()</span> <span class="p">{</span>
          <span class="n">this</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="s1">&#39;TBW: Get input from voice&#39;</span><span class="p">;</span>
        <span class="p">},</span>

      <span class="p">),</span>
    <span class="p">];</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="o">//</span> <span class="n">Suggestions</span> <span class="nb">list</span> <span class="n">widget</span> <span class="n">displayed</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">search</span> <span class="n">page</span><span class="o">.</span>
<span class="k">class</span> <span class="nc">_WordSuggestionList</span> <span class="n">extends</span> <span class="n">StatelessWidget</span> <span class="p">{</span>
  <span class="n">const</span> <span class="n">_WordSuggestionList</span><span class="p">({</span><span class="n">this</span><span class="o">.</span><span class="n">suggestions</span><span class="p">,</span> <span class="n">this</span><span class="o">.</span><span class="n">query</span><span class="p">,</span> <span class="n">this</span><span class="o">.</span><span class="n">onSelected</span><span class="p">});</span>

  <span class="n">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">suggestions</span><span class="p">;</span>
  <span class="n">final</span> <span class="n">String</span> <span class="n">query</span><span class="p">;</span>
  <span class="n">final</span> <span class="n">ValueChanged</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">onSelected</span><span class="p">;</span>

  <span class="nd">@override</span>
  <span class="n">Widget</span> <span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">final</span> <span class="n">textTheme</span> <span class="o">=</span> <span class="n">Theme</span><span class="o">.</span><span class="n">of</span><span class="p">(</span><span class="n">context</span><span class="p">)</span><span class="o">.</span><span class="n">textTheme</span><span class="o">.</span><span class="n">subhead</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">ListView</span><span class="o">.</span><span class="n">builder</span><span class="p">(</span>
      <span class="n">itemCount</span><span class="p">:</span> <span class="n">suggestions</span><span class="o">.</span><span class="n">length</span><span class="p">,</span>
      <span class="n">itemBuilder</span><span class="p">:</span> <span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">,</span> <span class="nb">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">final</span> <span class="n">String</span> <span class="n">suggestion</span> <span class="o">=</span> <span class="n">suggestions</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="k">return</span> <span class="n">ListTile</span><span class="p">(</span>
          <span class="n">leading</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">isEmpty</span> <span class="err">?</span> <span class="n">Icon</span><span class="p">(</span><span class="n">Icons</span><span class="o">.</span><span class="n">history</span><span class="p">)</span> <span class="p">:</span> <span class="n">Icon</span><span class="p">(</span><span class="n">null</span><span class="p">),</span>
          <span class="o">//</span> <span class="n">Highlight</span> <span class="n">the</span> <span class="n">substring</span> <span class="n">that</span> <span class="n">matched</span> <span class="n">the</span> <span class="n">query</span><span class="o">.</span>
          <span class="n">title</span><span class="p">:</span> <span class="n">RichText</span><span class="p">(</span>
            <span class="n">text</span><span class="p">:</span> <span class="n">TextSpan</span><span class="p">(</span>
              <span class="n">text</span><span class="p">:</span> <span class="n">suggestion</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">query</span><span class="o">.</span><span class="n">length</span><span class="p">),</span>
              <span class="n">style</span><span class="p">:</span> <span class="n">textTheme</span><span class="o">.</span><span class="n">copyWith</span><span class="p">(</span><span class="n">fontWeight</span><span class="p">:</span> <span class="n">FontWeight</span><span class="o">.</span><span class="n">bold</span><span class="p">),</span>
              <span class="n">children</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">TextSpan</span><span class="o">&gt;</span><span class="p">[</span>
                <span class="n">TextSpan</span><span class="p">(</span>
                  <span class="n">text</span><span class="p">:</span> <span class="n">suggestion</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">length</span><span class="p">),</span>
                  <span class="n">style</span><span class="p">:</span> <span class="n">textTheme</span><span class="p">,</span>
                <span class="p">),</span>
              <span class="p">],</span>
            <span class="p">),</span>
          <span class="p">),</span>
          <span class="n">onTap</span><span class="p">:</span> <span class="p">()</span> <span class="p">{</span>
            <span class="n">onSelected</span><span class="p">(</span><span class="n">suggestion</span><span class="p">);</span>
          <span class="p">},</span>
        <span class="p">);</span>
      <span class="p">},</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p><strong><em>Source code repo:</em></strong>
Recipe source code is available <a href="https://github.com/ptyagicodecamp/flutter_cookbook/tree/master/search_appbar">here</a></p>
<h3>References:</h3>
<ol>
<li><a href="https://docs.flutter.io/flutter/material/SearchDelegate-class.html">Search Delegate</a></li>
<li><a href="https://github.com/flutter/flutter/blob/master/examples/flutter_gallery/lib/demo/material/search_demo.dart">Flutter Gallery</a></li>
<li><a href="https://docs.flutter.io/flutter/material/SearchDelegate/buildActions.html">BuildActions</a></li>
<li><a href="'https://docs.flutter.io/flutter/material/SearchDelegate/buildResults.html">BuildResults</a></li>
</ol>
<p>Happy cooking with Flutter :)</p>
<p><em>Liked the article ?
Couldn't find a topic of your interest ? Please leave comments or <a href="mailto:ptyagicodecamp@gmail.com">email me</a> about topics you would like me to write !
<a href="https://www.paypal.me/pritya">BTW I love cupcakes and coffee both :)</a></em></p>
  </div>
  
<div class="article-tag-list">
<span class="label label-default">Tags</span>
	<a href="https://ptyagicodecamp.github.io/tag/searchdelegate.html"><i class="fa fa-tag"></i>SearchDelegate</a>&nbsp;
	<a href="https://ptyagicodecamp.github.io/tag/searchappbar.html"><i class="fa fa-tag"></i>SearchAppBar</a>&nbsp;
	<a href="https://ptyagicodecamp.github.io/tag/flutter.html"><i class="fa fa-tag"></i>flutter</a>&nbsp;
	<a href="https://ptyagicodecamp.github.io/tag/code-recipes.html"><i class="fa fa-tag"></i>code-recipes</a>&nbsp;
	<a href="https://ptyagicodecamp.github.io/tag/android.html"><i class="fa fa-tag"></i>android</a>&nbsp;
	<a href="https://ptyagicodecamp.github.io/tag/android-studio.html"><i class="fa fa-tag"></i>android Studio</a>&nbsp;
	<a href="https://ptyagicodecamp.github.io/tag/ios.html"><i class="fa fa-tag"></i>iOS</a>&nbsp;
</div>  <hr />
  <div class="well well-sm">  <!-- Social media sharing buttons -->

    <!-- Google+ -->
    <div class="g-plus" data-action="share" data-annotation="bubble"></div>
    &nbsp;&nbsp;&nbsp;&nbsp;
    <div class="g-plusone" data-size="medium"></div>&nbsp;

    <!-- Facebook -->
    <div class="fb-like" 
        data-href="https://ptyagicodecamp.github.io/implementing-search-action-in-appbar.html" 
        data-layout="button_count" 
        data-action="like" data-show-faces="true" 
        data-share="true">
    </div>
    &nbsp;
  </div> <!-- /Social media sharing buttons -->
</article>
        </div><!-- /content -->

        <div class="col-md-3 sidebar-nav" id="sidebar">

<div class="row">

<div class="col-xs-6 col-md-12">
<h4><i class="fa fa-comment fa-fw fa-lg"></i> Social</h4>
<ul class="list-unstyled social-links">
    <li><a href="https://www.linkedin.com/in/priyankatyagi" target="_blank">
	  <i class="fa fa-linkedin-square fa-fw fa-lg" title="LinkedIn"></i>
		LinkedIn
	</a></li>
    <li><a href="https://github.com/ptyagicodecamp" target="_blank">
	  <i class="fa fa-github-square fa-fw fa-lg" title="GitHub"></i>
		GitHub
	</a></li>
    <li><a href="https://medium.com/@ptyagicodecamp" target="_blank">
	  <i class="fa fa-bitbucket-square fa-fw fa-lg" title="Medium"></i>
		Medium
	</a></li>
    <li><a href="https://plus.google.com/u/0/114534305132859234440" target="_blank">
	  <i class="fa fa-google-plus-square fa-fw fa-lg" title="Google+"></i>
		Google+
	</a></li>
    <li><a href="https://twitter.com/ptyagi13" target="_blank">
	  <i class="fa fa-twitter-square fa-fw fa-lg" title="Twitter"></i>
		Twitter
	</a></li>
</ul>
</div>

<div class="col-xs-6 col-md-12">
<h4><i class="fa fa-folder fa-fw fa-lg"></i> Categories</h4>
<ul class="list-unstyled category-links">
  <li><a href="https://ptyagicodecamp.github.io/category/development.html" >
    <i class="fa fa-folder-open fa-fw fa-lg"></i> Development</a></li>
  <li><a href="https://ptyagicodecamp.github.io/category/development-flutter-cross-platform.html" >
    <i class="fa fa-folder-open fa-fw fa-lg"></i> Development, Flutter, Cross-platform</a></li>
</ul>
</div>

</div> <!-- /row -->


<h4><i class="fa fa-rss fa-fw fa-lg"></i> Feeds</h4>
<ul class="list-unstyled">
    <li><a href="https://ptyagicodecamp.github.io/feeds/all.atom.xml" 
		   type="application/atom+xml" rel="alternate">
		<i class="fa fa-rss-square fa-fw fa-lg"></i> Atom Feed</a></li>
</ul>

<hr />

        </div><!--/sidebar -->
      </div><!--/row-->
    </div><!--/.container /#main-container -->

    <footer id="site-footer">
 
      <address id="site-colophon">
        <p class="text-center text-muted">
        Site built using <a href="http://getpelican.com/" target="_blank">Pelican</a>
        &nbsp;&bull;&nbsp; Theme based on
        <a href="http://www.voidynullness.net/page/voidy-bootstrap-pelican-theme/"
           target="_blank">VoidyBootstrap</a> by 
        <a href="http://www.robertiwancz.com/"
           target="_blank">RKI</a>  
        </p>
      </address><!-- /colophon  -->
    </footer>


    <!-- javascript -->
   
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js" integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
            integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
            crossorigin="anonymous"></script>


<!-- Facebook -->
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script>

<!-- Twitter -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Google+ -->
<!-- Synchronous 
<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
-->
<!-- Asynchronous -->
<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/platform.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>  </body>
</html>