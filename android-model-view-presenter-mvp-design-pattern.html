
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="index, follow" />

  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Source+Sans+Pro:300,400,400i,700" rel="stylesheet">

    <link rel="stylesheet/less" type="text/css" href="https://ptyagicodecamp.github.io/theme/stylesheet/style.less">
    <script src="//cdnjs.cloudflare.com/ajax/libs/less.js/2.5.1/less.min.js" type="text/javascript"></script>

  <link rel="stylesheet" type="text/css" href="https://ptyagicodecamp.github.io/theme/pygments/monokai.min.css">
  <link rel="stylesheet" type="text/css" href="https://ptyagicodecamp.github.io/theme/font-awesome/css/font-awesome.min.css">

    <link href="https://ptyagicodecamp.github.io/static/custom.css" rel="stylesheet">

    <link href="https://ptyagicodecamp.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="techLog Atom">


    <link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon">

<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-133714063-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->
    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#333333">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#333333">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Microsoft EDGE -->
    <meta name="msapplication-TileColor" content="#333333">

<meta name="author" content="ptyagi" />
<meta name="description" content="A Quick tour to Model-View-Presenter (MVP) Android Design Pattern." />
<meta name="keywords" content="Android, Android Design Pattern, MVP, Tips &amp; Tricks, Model-View-Presenter">

<meta property="og:site_name" content="techLog"/>
<meta property="og:title" content="Android Model-View-Presenter (MVP) Design Pattern"/>
<meta property="og:description" content="A Quick tour to Model-View-Presenter (MVP) Android Design Pattern."/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://ptyagicodecamp.github.io/android-model-view-presenter-mvp-design-pattern.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2017-07-13 13:06:00-04:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://ptyagicodecamp.github.io/author/ptyagi.html">
<meta property="article:section" content="Development"/>
<meta property="article:tag" content="Android"/>
<meta property="article:tag" content="Android Design Pattern"/>
<meta property="article:tag" content="MVP"/>
<meta property="article:tag" content="Tips &amp; Tricks"/>
<meta property="article:tag" content="Model-View-Presenter"/>
<meta property="og:image" content="/images/favicon.ico">

  <title>techLog &ndash; Android Model-View-Presenter (MVP) Design Pattern</title>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "ca-pub-1446757973183590",
      enable_page_level_ads: true
    });
  </script>
</head>
<body>
  <aside>
    <div>
      <a href="https://ptyagicodecamp.github.io">
        <img src="/images/favicon.ico" alt="techLog" title="techLog">
      </a>
      <h1><a href="https://ptyagicodecamp.github.io">techLog</a></h1>

<p>Explore | Android | Software Engineering</p>

      <ul class="social">
        <li><a class="sc-LinkedIn" href="https://www.linkedin.com/in/priyankatyagi" target="_blank"><i class="fa fa-LinkedIn"></i></a></li>
        <li><a class="sc-GitHub" href="https://github.com/ptyagicodecamp" target="_blank"><i class="fa fa-GitHub"></i></a></li>
        <li><a class="sc-Medium" href="https://medium.com/@ptyagicodecamp" target="_blank"><i class="fa fa-Medium"></i></a></li>
        <li><a class="sc-Google+" href="https://plus.google.com/u/0/114534305132859234440" target="_blank"><i class="fa fa-Google+"></i></a></li>
        <li><a class="sc-Twitter" href="https://twitter.com/ptyagi13" target="_blank"><i class="fa fa-Twitter"></i></a></li>
        <li><a class="sc-rss" href="/blog/feeds/all.atom.xml" target="_blank"><i class="fa fa-rss"></i></a></li>
      </ul>
    </div>

      <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <ins class="adsbygoogle ads-aside"
           data-ad-client="ca-pub-1446757973183590"
           data-ad-slot="3613978005"></ins>
      <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>

  </aside>
  <main>

    <nav>
      <a href="https://ptyagicodecamp.github.io">    Home
</a>

      <a href="/archives.html">Archives</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>

      <a href="https://ptyagicodecamp.github.io/feeds/all.atom.xml">    Atom
</a>

    </nav>

<article class="single">
  <header>
      
    <h1 id="android-model-view-presenter-mvp-design-pattern">Android Model-View-Presenter (MVP) Design Pattern</h1>
    <p>
          Posted on July 13, 2017 in <a href="https://ptyagicodecamp.github.io/category/development.html">Development</a>


    </p>
  </header>


  <div>
    <h1>Android Model-View-Presenter (MVP) Design Pattern</h1>
<h2>Quick Introduction</h2>
<p>There's enough material available on internet about what a
Model-View-Presenter (MVP) design pattern is, and why it should be used.
The motivation behind utilizing this design pattern is to separate UI related code from business
logic. <strong>Presenter</strong> is a facilitator between <strong>View</strong> (UI related code) and <strong>Model</strong> (real data objects).
For example, if a TextView widget wants to display a <code>Person</code>'s name (data object model), then View will
send a request to Presenter to fetch Data object's information. Presenter in turn will fetch Model class (<code>Person</code> data model)
information and pass it on back to View. That way View would never have to directly interact with Model classes.
So, what's the benefit of this separation ? Any guesses ? Yes, you got it ... Clean code !
Such clean code separates UI related code base from model classes, and makes it super simple to unit tests without
running instrumentation tests.</p>
<p>Alright, I'll be using a simple example to demonstrate the real working of MVP pattern. In this example,
user can pick an image from Gallery, and display it in the main UI (fragment). Along with displaying
picture in ImageView widget, it also shows FilePath below the ImageView.</p>
<h3>Selecting picture from Gallery</h3>
<p>This sample app does following 4 things using MVP pattern:</p>
<ul>
<li>Allows user to pick a picture from Gallery and shows in an ImageView</li>
<li>Displays File's path in TextView under ImageView</li>
<li>Give user option to copy chosen image into app's data directory</li>
<li>Give user option to rename picture (copied into app's data directory)</li>
</ul>
<h3>Show me code</h3>
<p>There're two Interfaces dedicated to View and Presenter related contracts:
* <a href="https://github.com/ptyagicodecamp/android-recipes/blob/develop/CopyGalleryPic/app/src/main/java/org/pcc/copygallerypic/view/ContractView.java#L12:L22">ContractView</a> Interface.</p>
<div class="highlight"><pre><span></span>public interface ContractView {
    //displays image in Imageview widget
    void showImagePreview(@NonNull Uri uri);

    //Displays image file information in textview
    void showImageInfo(String infoSting);

    //That&#39;s how a presenter is assigned to a view
    void setUserActionListener(ContractUserActionListener userActionListener);

}
</pre></div>


<ul>
<li><a href="https://github.com/ptyagicodecamp/android-recipes/blob/develop/CopyGalleryPic/app/src/main/java/org/pcc/copygallerypic/presenter/ContractUserActionListener.java#L12:L25">ContractUserActionListener</a> Interface</li>
</ul>
<div class="highlight"><pre><span></span>public interface ContractUserActionListener {

    //An action taken by user to load a image from gallery into ImageView widget
    void loadImage(Context context, Uri uri) throws IOException;

    //User initiates action to display image file information in textView UI
    void loadImageInfo();

    //User action to copy an image from gallery in to app&#39;s picture directory (app&#39;s data directory)
    void copyImageIntoAppDir(Context context) throws IOException;

    //User can rename a image file (in app&#39;s data directory)
    void renameImage(Context context, String newName);
}
</pre></div>


<p>Activity or Fragment class implements <code>ContractView</code> while Presenter would implements
<code>ContractUserActionListener</code>.</p>
<p>In this sample, UI class <code>ImageViewerFragment</code> is implementing <code>ContractView</code>.</p>
<div class="highlight"><pre><span></span>public class ImageViewerFragment extends Fragment implements ContractView {
  ...
}
</pre></div>


<p>And, Presenter class <code>ImagePresenter</code> implements <code>ContractUserActionListener</code>:</p>
<div class="highlight"><pre><span></span>public class ImagePresenter implements ContractUserActionListener {
  ...
}
</pre></div>


<p><code>ImageViewerFragment</code> holds a reference to <code>ImagePresenter</code>, so that it can pass
requests to query data from models. At the same time, <code>ImagePresenter</code> holds a reference
back to <code>ImageViewerFragment</code> to pass back on the results.</p>
<p>That concludes the theory part.</p>
<p>Here are few screenshots from the sample app:</p>
<p><strong>Start state:</strong>
This is how sample app looks just after start up. The FAB '+' is clicked to select image from gallery.
<img alt="Alt launch screen" src="../images/android-mvp/start.png"></p>
<p><strong>Picture loaded from Gallery state:</strong>
<img alt="Alt Picture loaded from gallery" src="../images/android-mvp/picture_loaded_from_gallery.png"></p>
<p><strong>Image copied to App's data dir state:</strong>
<img alt="Alt Image copied to App's data dir state" src="../images/android-mvp/image_copied_to_datadir.png"></p>
<p><strong>Renaming image - Enter new name:</strong>
<img alt="Alt Renaming image" src="../images/android-mvp/rename_1.png"></p>
<p><strong>Renaming image - Final:</strong>
<img alt="Alt Renaming image" src="../images/android-mvp/rename_2.png"></p>
<h3>Source Code</h3>
<p>Source is available at <a href="https://github.com/ptyagicodecamp/android-recipes/tree/develop/CopyGalleryPic">Github</a></p>
<p>Happy Exploring !</p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="https://ptyagicodecamp.github.io/tag/android.html">Android</a>
      <a href="https://ptyagicodecamp.github.io/tag/android-design-pattern.html">Android Design Pattern</a>
      <a href="https://ptyagicodecamp.github.io/tag/mvp.html">MVP</a>
      <a href="https://ptyagicodecamp.github.io/tag/tips-tricks.html">Tips & Tricks</a>
      <a href="https://ptyagicodecamp.github.io/tag/model-view-presenter.html">Model-View-Presenter</a>
    </p>
  </div>

  <div class="center social-share">
    <p>    Like this article? Share it with your friends!
</p>
    <div class="addthis_native_toolbox"></div>
    <div class="addthis_sharing_toolbox"></div>
    <div class="addthis_inline_share_toolbox"></div>
  </div>


    <div class="addthis_relatedposts_inline"></div>

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle ads-responsive"
         data-ad-client="ca-pub-1446757973183590"
         data-ad-slot="8282360068"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'flex-pelican';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
        Please enable JavaScript to view comments.

</noscript>
<!-- End Disqus -->
</article>

    <footer>
<p>
  &copy;  2019 - This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>
</p>
<p>    Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a>
</p><p>
  <a rel="license"
     href="http://creativecommons.org/licenses/by-sa/4.0/"
     target="_blank">
    <img alt="Creative Commons License"
         title="Creative Commons License"
         style="border-width:0"
           src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png"
         width="80"
         height="15"/>
  </a>
</p>    </footer>
  </main>


    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-55adbb025d4f7e55" async="async"></script>


<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " techLog ",
  "url" : "https://ptyagicodecamp.github.io",
  "image": "/images/favicon.ico",
  "description": "Mobile engineering tech logger."
}
</script>

</body>
</html>